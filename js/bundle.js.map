{"version":3,"sources":["webpack/bootstrap 2579c755e48ad2a242cc","./js/main.js","./js/view.js","./js/board.js","./js/snake.js","./js/SmartSnake.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;;AAGA;AACA;AACA,EAAC;;;;;;;ACLD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,kBAAkB;AACnC;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA,yBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,0CAA0C;AAC9D;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAgB,sCAAsC;AACtD,mBAAkB,qDAAqD;AACvE,mBAAkB,2EAA2E;;AAE7F;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA,iBAAgB,uCAAuC;;AAEvD;;AAEA;AACA,yCAAwC,sBAAsB;AAC9D;AACA,kBAAiB,+BAA+B;AAChD,IAAG;AACH,yCAAwC,sBAAsB;AAC9D;AACA,kBAAiB,iCAAiC;AAClD;AACA;;AAEA;AACA;;AAEA;AACA,gBAAe,gBAAgB;AAC/B,IAAG;;AAEH;AACA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACnPA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACxIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACjEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2579c755e48ad2a242cc\n **/","var View = require('./view');\n\n\n$(function () {\n  var snakeGame = new View($(\".snake\"));\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","var Board = require(\"./board\");\n\nvar View = function($el){\n  this.SIZE = [20,20];\n  this.domObj = $el;\n  this.board = new Board(this.SIZE);\n  this.loop = null;\n  this.setupDOMObj();\n  this.bindEvents();\n};\n\nView.prototype.setupDOMObj = function () {\n  for (var i = 0; i < this.SIZE[0]; i++) {\n    this.domObj.append(\"<ul class='row' data-row='\"+i+\"'></ul>\");\n    for (var j = 0; j < this.SIZE[1]; j++) {\n      $(\"ul[data-row=\"+i+\"]\")\n        .append(\"<li class='col' data-pos='\"+[i,j]+\"'></li>\");\n    }\n  }\n};\n\nView.prototype.step = function () {\n  try{\n    var boardInfo = this.board.render();\n  }catch(e){\n    clearInterval(this.loop);\n    if(e.message.includes(\"Red\")){\n      $(\"#loser\").attr(\"src\", \"http://giphy.com/embed/SKkHndWFqOjjG?html5=true\");\n      $(\".modal-content\").css(\"background-color\", \"rgb(0,150,255)\");\n    } else {\n      $(\"#loser\").attr(\"src\", \"http://giphy.com/embed/3VQDfP4q4ZYyY?html5=true\");\n      $(\".modal-content\").css(\"background-color\", \"rgb(255,40,0)\");\n    }\n\n    $(\"#reason\").text(e.message);\n    $(\"#gameover\").css({display: \"block\"});\n    $(\"#players-label\").show();\n    $(\"#color-label\").show();\n    $(\".start-game\").css(\"display\", \"block\");\n    this.loop = null;\n    return;\n  }\n\n  var snake1 = boardInfo.snakeone;\n  var snake2 = boardInfo.snaketwo;\n  var apple = boardInfo.apple;\n  $(\".segment1\").removeClass(\"segment1\");\n  $(\".segment2\").removeClass(\"segment2\");\n  $(\".apple\").text(\"\");\n  $(\".apple\").removeClass(\"apple\");\n\n  snake1.forEach(function(pos){\n    $(\"li[data-pos='\"+pos[1]+\",\"+pos[0]+\"']\").addClass(\"segment1\");\n  });\n\n  snake2.forEach(function(pos){\n    $(\"li[data-pos='\"+pos[1]+\",\"+pos[0]+\"']\").addClass(\"segment2\");\n  });\n\n  $(\"li[data-pos='\"+apple[1]+\",\"+apple[0]+\"']\").addClass(\"apple\");\n  $(\".apple\").text(\"\\uD83C\\uDF6C\");\n};\n\nView.prototype.bindEvents = function () {\n  var view = this;\n\n  view.addStartGame();\n  view.addMusic();\n  view.addPlayersSelection();\n  view.addModalInteraction();\n\n  $(\".snake\").focus();\n  $(window).on(\"keydown\", function(e){\n    view.handleKeyPress(e.keyCode);\n  });\n};\n\nView.prototype.addStartGame = function () {\n  var view = this;\n\n  $(\".snake\").on(\"click\", function(e){\n    e.preventDefault();\n    if(view.loop === null){\n      $(\".start-game\").css(\"display\", \"none\");\n      $(\"#players-label\").hide(\"slow\");\n      $(\"#color-label\").hide(\"slow\");\n      view.board.reset();\n      view.loop = setInterval(view.step.bind(view), 250);\n    }\n  });\n};\n\nView.prototype.addMusic = function () {\n  var audio = document.getElementById(\"pokesong\");\n  var playpause = false;\n\n  $(\".pokesong\").on(\"click\", function(e){\n    e.preventDefault();\n    playpause = !playpause;\n\n    if(playpause)\n    {\n      audio.pause();\n      $(\".pokesong\").attr(\"src\",\"./img/play.png\");\n    }\n    else\n    {\n      audio.play();\n      $(\".pokesong\").attr(\"src\",\"./img/mute.png\");\n    }\n  });\n};\n\nView.prototype.addPlayersSelection = function () {\n  var view = this;\n\n  $(\"#players-label\").on(\"click\", function(e){\n    if($(\"#players\").prop('checked')){\n      if($(\"#color\").length){\n        view.removeSnakeColorOption();\n      }\n      view.removePlayerInstructions(\"red\");\n      view.removePlayerInstructions(\"blue\");\n      view.addPlayerInstructions(\"red\");\n      $('<div />', { id:\"instructions-spacer\", class:\"spacer\"}).appendTo($(\".instructions-container\"));\n      view.addPlayerInstructions(\"blue\");\n      view.board.ai = false;\n    } else {\n      view.addSnakeColorOption();\n      view.board.ai = true;\n    }\n  });\n};\n\nView.prototype.removeSnakeColorOption = function() {\n  $(\"#color\").remove();\n  $(\"#color-label\").remove();\n  $(\"#selector-spacer\").remove();\n  this.board.removeSmartSnake();\n};\n\nView.prototype.addSnakeColorOption = function() {\n  var container = $(\".selectors-container\");\n  var view = this;\n\n  $('<div />', { id:\"selector-spacer\", class:\"spacer\"}).appendTo(container);\n  $('<input />', { type: 'checkbox', id: \"color\", class:\"tgl tgl-flip\"}).appendTo(container);\n  $('<label />', { 'for': 'color', id: \"color-label\", tagOff:\"웃\", tagOn:\"웃\", class:\"tgl-btn\"}).appendTo(container);\n\n  if($(\"#blue-instructions\").length){\n    view.removePlayerInstructions(\"blue\");\n  }\n\n  if ($(\"#red-instructions\").length) {\n    view.removePlayerInstructions(\"red\");\n  }\n  $(\"#instructions-spacer\").remove();\n\n  view.addPlayerInstructions(\"red\");\n\n  $(\"#color-label\").on(\"click\", function(e){\n    if($(\"#color\").prop('checked')){\n      view.addPlayerInstructions(\"red\");\n      view.removePlayerInstructions(\"blue\");\n      view.board.setSmartSnake(\"Blue\");\n    } else {\n      view.addPlayerInstructions(\"blue\");\n      view.removePlayerInstructions(\"red\");\n      view.board.setSmartSnake(\"Red\");\n    }\n  });\n};\n\nView.prototype.addPlayerInstructions = function (color) {\n  var instructions = color + \"-instructions\";\n\n  $('<div />', { id:instructions, class:\"instructions\"}).appendTo($(\".instructions-container\"));\n\n  var instructionsEl = $(\"#\" + color + \"-instructions\");\n\n  if (color === \"red\") {\n    instructionsEl.append($('<img />', { src:\"./img/LUDR.png\"}));\n    instructionsEl.append($('<br />'));\n    $('<em />', {class:\"fire\", text:\"Red Snake\"}).appendTo(instructionsEl);\n  } else {\n    instructionsEl.append($('<img />', { src:\"./img/WASD.png\"}));\n    instructionsEl.append($('<br />'));\n    $('<em />', {class:\"water\", text:\"Blue Snake\"}).appendTo(instructionsEl);\n  }\n};\n\nView.prototype.addModalInteraction = function(){\n  var modal = $(\"#gameover\");\n\n  $(\".close\").on(\"click\", function() {\n    modal.css({display: \"none\"});\n  });\n\n  window.onclick = function(event) {\n    if (event.target.id === \"gameover\" ) {\n      modal.css({display: \"none\"});\n    }\n  };\n};\n\nView.prototype.removePlayerInstructions = function (color) {\n  $(\"#\" + color + \"-instructions\").remove();\n};\n\nView.prototype.handleKeyPress = function (keyCode) {\n  var direction = \"\";\n  switch (keyCode)\n  {\n    case 38:\n      direction = \"N\";\n      break;\n    case 40:\n      direction = \"S\";\n      break;\n    case 39:\n      direction = \"E\";\n      break;\n    case 37:\n      direction = \"W\";\n      break;\n\n    case 87:\n      direction = \"up\";\n      break;\n    case 65:\n      direction = \"left\";\n      break;\n    case 83:\n      direction = \"down\";\n      break;\n    case 68:\n      direction = \"right\";\n      break;\n  }\n\n  this.board.move(direction);\n};\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/view.js\n ** module id = 1\n ** module chunks = 0\n **/","var Snake = require(\"./snake\");\nvar SmartSnake = require(\"./SmartSnake\");\n\n// Snake 1 == Red\n// Snake 2 == Blue\n\nvar Board = function(size){\n  this.size = size;\n  this.snake1 = new Snake([Math.floor(size[0]/2), Math.floor(size[1]/2)]);\n  this.snake2 = new Snake([Math.floor(size[0]/2) + 1, Math.floor(size[1]/2)]);\n  this.apple = [Math.floor(Math.random() * size[0]),\n    Math.floor(Math.random() * size[1])];\n  this.ai = false;\n};\n\nBoard.prototype.setSmartSnake = function (color) {\n  var size = this.size;\n\n  if (color === \"Red\") {\n    this.snake1 = new SmartSnake([Math.floor(size[0]/2), Math.floor(size[1]/2)]);\n  } else {\n    this.snake2 = new SmartSnake([Math.floor(size[0]/2) + 1, Math.floor(size[1]/2)]);\n  }\n};\n\nBoard.prototype.removeSmartSnake = function () {\n  var size = this.size;\n\n  this.snake1 = new Snake([Math.floor(size[0]/2), Math.floor(size[1]/2)]);\n  this.snake2 = new Snake([Math.floor(size[0]/2) + 1, Math.floor(size[1]/2)]);\n};\n\nBoard.prototype.move = function (direction) {\n  var snake1Dirs = [\"N\",\"E\",\"W\",\"S\"];\n  var snake2Dirs = [\"up\",\"right\",\"left\",\"down\"];\n  if(snake1Dirs.indexOf(direction) !== -1 ){\n    this.snake1.turn(direction);\n  }else if (snake2Dirs.indexOf(direction) !== -1) {\n    this.snake2.turn(direction);\n  }\n};\n\nBoard.prototype.render = function () {\n  this.snake1.move();\n  this.snake2.move();\n\n  try {\n    this.snake1.harakiri();\n  }catch(e){\n    throw new Error(\"Red Snake went over itself!\");\n  }\n\n  try {\n    this.snake2.harakiri();\n  }catch(e){\n    throw new Error(\"Blue Snake went over itself!\");\n  }\n\n  try {\n  this.snakeOutOfBounds(this.snake1);\n  }catch(e){\n    throw new Error(\"Red Snake Out of Bounds!\");\n  }\n\n  try {\n    this.snakeOutOfBounds(this.snake2);\n  }catch(e){\n    throw new Error(\"Blue Snake Out of Bounds!\");\n  }\n\n  try {\n    this.snakeCrossing(this.snake1, this.snake2);\n  }catch(e){\n    throw new Error(\"Red Snake ran into the other Snake!\");\n  }\n\n  try {\n    this.snakeCrossing(this.snake2, this.snake1);\n  }catch(e){\n    throw new Error(\"Blue Snake ran into the other Snake!\");\n  }\n\n  this.ateApple(this.snake1);\n  this.ateApple(this.snake2);\n\n  return this.draw();\n};\n\nBoard.prototype.snakeCrossing = function (snake1, snake2) {\n  var head = snake1.segments[0];\n  snake2.segments.forEach(function(el, idx){\n    if(idx > 0){\n      if(head[0] === el[0] && head[1] === el[1]){\n        throw new Error(\"Snake dead!\");\n      }\n    }\n  });\n};\n\nBoard.prototype.ateApple = function (snake) {\n  if (snake.segments[0][0] === this.apple[0] &&\n        snake.segments[0][1] === this.apple[1]){\n    snake.grow();\n    this.regenerateApple();\n  }\n};\n\nBoard.prototype.reset = function () {\n  this.snake1 = new Snake([Math.floor(this.size[0]/2),\n    Math.floor(this.size[1]/2)]);\n  this.snake2 = new Snake([Math.floor(this.size[0]/2) + 1,\n    Math.floor(this.size[1]/2)]);\n  this.apple = [Math.floor(Math.random() * this.size[0]),\n    Math.floor(Math.random() * this.size[1])];\n};\n\nBoard.prototype.snakeOutOfBounds = function (snake) {\n  if (snake.segments[0][0] > this.size[0] ||\n    snake.segments[0][0] < 0 ||\n    snake.segments[0][1] > this.size[1] ||\n    snake.segments[0][1] < 0){\n    throw new Error(\"Snake out of bounds!\");\n  }\n};\n\nBoard.prototype.draw = function () {\n  return {snakeone: this.snake1.segments,\n          snaketwo: this.snake2.segments,\n          apple: this.apple};\n};\n\nBoard.prototype.regenerateApple = function () {\n  this.apple = [Math.floor(Math.random() * this.size[0]),\n    Math.floor(Math.random() * this.size[1])];\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 2\n ** module chunks = 0\n **/","var Snake = function(pos){\n  this.direction = \"N\";\n  this.segments = [pos];\n  this.turnsToGrow = 0;\n};\n\nSnake.prototype.move = function () {\n  var head = this.segments[0];\n  var segment = [];\n  switch (this.direction)\n  {\n    case \"N\":\n      segment = [head[0],head[1] - 1];\n      break;\n    case \"up\":\n      segment = [head[0],head[1] - 1];\n      break;\n    case \"S\":\n      segment = [head[0],head[1] + 1];\n      break;\n    case \"down\":\n      segment = [head[0],head[1] + 1];\n      break;\n    case \"E\":\n      segment = [head[0] + 1, head[1]];\n      break;\n    case \"right\":\n      segment = [head[0] + 1, head[1]];\n      break;\n    case \"W\":\n      segment = [head[0] - 1,head[1]];\n      break;\n    case \"left\":\n      segment = [head[0] - 1,head[1]];\n      break;\n  }\n\n  this.segments.unshift(segment);\n  if (this.turnsToGrow > 0){\n    this.turnsToGrow--;\n  }else{\n    this.segments.pop(1);\n  }\n};\n\nSnake.prototype.turn = function (direction) {\n  this.direction = direction;\n};\n\nSnake.prototype.harakiri = function () {\n  var head = this.segments[0];\n  this.segments.forEach(function(el, idx){\n    if(idx > 0){\n      if(head[0] === el[0] && head[1] === el[1]){\n        throw new Error(\"Snake dead!\");\n      }\n    }\n  });\n  return false;\n};\n\nSnake.prototype.grow = function () {\n  this.turnsToGrow += 1;\n};\n\nmodule.exports = Snake;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/snake.js\n ** module id = 3\n ** module chunks = 0\n **/","var Snake = require(\"./snake\");\n\nFunction.prototype.inherits = function (BaseClass) {\n  function Surrogate () {}\n  Surrogate.prototype = BaseClass.prototype;\n  this.prototype = new Surrogate();\n  this.prototype.constructor = this;\n};\n\nvar SmartSnake = function (pos){\n  Snake.call(this, pos);\n};\n\nSmartSnake.inherits(Snake);\n\n// SmartSnake.prototype.move = function () {\n//   var head = this.segments[0];\n//   var segment = [];\n//   switch (this.direction)\n//   {\n//     case \"up\":\n//       segment = [head[0],head[1] - 1];\n//       break;\n//     case \"down\":\n//       segment = [head[0],head[1] + 1];\n//       break;\n//     case \"right\":\n//       segment = [head[0] + 1, head[1]];\n//       break;\n//     case \"left\":\n//       segment = [head[0] - 1,head[1]];\n//       break;\n//   }\n//\n//   this.segments.unshift(segment);\n//   if (this.turnsToGrow > 0){\n//     this.turnsToGrow--;\n//   }else{\n//     this.segments.pop(1);\n//   }\n// };\n\nSmartSnake.prototype.manhattanDistance = function (node1, node2, size) {\n    var dx = Math.abs( node1.x - node2.x );\n    var dy = Math.abs( node1.y - node2.y );\n    return dx + dy;\n};\n\nmodule.exports = SmartSnake;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/SmartSnake.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}